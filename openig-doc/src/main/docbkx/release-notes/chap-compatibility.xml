<?xml version="1.0" encoding="UTF-8"?>
<!--
  ! CCPL HEADER START
  !
  ! This work is licensed under the Creative Commons
  ! Attribution-NonCommercial-NoDerivs 3.0 Unported License.
  ! To view a copy of this license, visit
  ! http://creativecommons.org/licenses/by-nc-nd/3.0/
  ! or send a letter to Creative Commons, 444 Castro Street,
  ! Suite 900, Mountain View, California, 94041, USA.
  !
  ! You can also obtain a copy of the license at
  ! trunk/legal/CC-BY-NC-ND.txt.
  ! See the License for the specific language governing permissions
  ! and limitations under the License.
  !
  ! If applicable, add the following below this CCPL HEADER, with the fields
  ! enclosed by brackets "[]" replaced with your own identifying information:
  !      Portions Copyright [yyyy] [name of copyright owner]
  !
  ! CCPL HEADER END
  !
  !      Copyright 2012-2015 ForgeRock AS.
  !    
-->
<chapter xml:id='chap-compatibility'
         xmlns='http://docbook.org/ns/docbook' version='5.0' xml:lang='en'
         xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
         xsi:schemaLocation='http://docbook.org/ns/docbook
                             http://docbook.org/xml/5.0/xsd/docbook.xsd'
         xmlns:xlink='http://www.w3.org/1999/xlink'>
 <title>Changes &amp; Deprecated Functionality</title>

 <para>
  This chapter covers both major changes to existing functionality,
  and also deprecated and removed functionality.
 </para>

 <section xml:id="changes">
  <title>Important Changes to Existing Functionality</title>

<!--
  <para>
   This release brings the following changes to ${projectName}.
  </para>
-->

  <para>
   The Route and gateway servlet configurations now use "baseURI" decorators
   instead of "baseURI" configuration fields.
  </para>

  <para>
   TODO: Update for the next release
  </para>
 </section>

 <section xml:id="deprecated">
  <title>Deprecated Functionality</title>

  <para>
   TODO: Update for the next release
  </para>

  <para>
   Deprecation is defined in the
   <link
    xlink:show="new"
    xlink:href="reference#reference"
    xlink:role="http://docbook.org/xlink/role/olink"
   ><citetitle>Reference</citetitle></link>
   appendix on
   <link
    xlink:show="new"
    xlink:href="reference#interface-stability"
    xlink:role="http://docbook.org/xlink/role/olink"
   ><citetitle>ForgeRock Product Interface Stability</citetitle></link>.
  </para>

  <table>
   <title>Configuration settings</title>

   <tgroup cols="3">
    <colspec colnum="1" colwidth="1*"/>
    <colspec colnum="2" colwidth="1*"/>
    <colspec colnum="3" colwidth="1*"/>

    <thead>
     <row>
      <entry>
       Configuration Object
      </entry>

      <entry>
       <link
        xlink:show="new"
        xlink:href="reference#interface-stability"
        xlink:role="http://docbook.org/xlink/role/olink"
       >Deprecated</link> Settings
      </entry>

      <entry>
       Newer
       <link
        xlink:show="new"
        xlink:href="reference#interface-stability"
        xlink:role="http://docbook.org/xlink/role/olink"
       >Evolving</link> Settings
      </entry>
     </row>
    </thead>

    <tbody>
     <row>
      <entry>
       <link
        xlink:show="new"
        xlink:href="reference#CaptureFilter"
        xlink:role="http://docbook.org/xlink/role/olink"
        >CaptureFilter</link>
      </entry>

      <entry>
       Entire object
      </entry>

      <entry>
       Use a
       <link
        xlink:show="new"
        xlink:href="reference#CaptureDecorator"
        xlink:role="http://docbook.org/xlink/role/olink"
        >CaptureDecorator</link> instead
      </entry>
     </row>

     <row>
      <entry morerows="1">
       <link
        xlink:show="new"
        xlink:href="reference#gateway-servlet"
        xlink:role="http://docbook.org/xlink/role/olink"
       >gateway servlet</link>
      </entry>

      <entry>
       "handlerObject"
      </entry>

      <entry>
       New name: "handler"
      </entry>
     </row>

     <row>
      <entry>
       Deprecated format:
       <literal>"heap": { "objects": [ configuration object, ... ] }</literal>
      </entry>

      <entry>
       New format:
       <literal>"heap": [ configuration object, ... ]</literal>
      </entry>
     </row>

     <row>
      <entry morerows="1">
       <link
        xlink:show="new"
        xlink:href="reference#HttpClient"
        xlink:role="http://docbook.org/xlink/role/olink"
       >HttpClient</link>
      </entry>

      <entry>
       "keystore"
      </entry>

      <entry>
       Replaced by "keyManager", which takes one or more
       <link
        xlink:show="new"
        xlink:href="reference#KeyManager"
        xlink:role="http://docbook.org/xlink/role/olink"
       >KeyManager</link> references
      </entry>
     </row>

     <row>
      <entry>
       "truststore"
      </entry>

      <entry>
       Replaced by "trustManager", which takes one or more
       <link
        xlink:show="new"
        xlink:href="reference#TrustManager"
        xlink:role="http://docbook.org/xlink/role/olink"
       >TrustManager</link> references
      </entry>
     </row>

     <row>
      <entry morerows="2">
       <link
        xlink:show="new"
        xlink:href="reference#OAuth2ResourceServerFilter"
        xlink:role="http://docbook.org/xlink/role/olink"
        >OAuth2ResourceServerFilter</link>
      </entry>

      <entry>
       "enforceHttps"
      </entry>

      <entry>
       New name: "requireHttps"
      </entry>
     </row>

     <row>
      <entry>
       "httpHandler"
      </entry>

      <entry>
       New name: "providerHandler"
      </entry>
     </row>

     <row>
      <entry>
       "requiredScopes"
      </entry>

      <entry>
       New name: "scopes"
      </entry>
     </row>

     <row>
      <entry>
       RedirectFilter
      </entry>

      <entry>
       Entire object
      </entry>

      <entry>
       Use <link
        xlink:href="reference#LocationHeaderFilter"
        xlink:role="http://docbook.org/xlink/role/olink"
        xlink:show="new"
       >LocationHeaderFilter</link> instead
      </entry>
     </row>

     <row>
      <entry>
       <link
        xlink:show="new"
        xlink:href="reference#Route"
        xlink:role="http://docbook.org/xlink/role/olink"
       >Route</link>
      </entry>

      <entry>
       Deprecated format:
       <literal>"heap": { "objects": [ configuration object, ... ] }</literal>
      </entry>

      <entry>
       New format:
       <literal>"heap": [ configuration object, ... ]</literal>
      </entry>
     </row>
    </tbody>
   </tgroup>
  </table>

  <itemizedlist>
   <para>
    The following API classes are likely to be removed in a future release.
   </para>

   <listitem>
    <para>
     <link
      xlink:href="${javadocBase}/index.html?org/forgerock/openig/filter/CaptureFilter.html"
      xlink:show="new"
     >org.forgerock.openig.filter.CaptureFilter</link>
    </para>
   </listitem>

   <listitem>
    <para>
     <link
      xlink:href="${javadocBase}/index.html?org/forgerock/openig/heap/NestedHeaplet.html"
      xlink:show="new"
     >org.forgerock.openig.heap.NestedHeaplet</link>
    </para>
   </listitem>
  </itemizedlist>

  <!--
  <para>
   No functionality is deprecated in this release.
  </para>
  -->
 </section>

 <section xml:id="removed">
  <title>Removed Functionality</title>

  <para>
   TODO: Update for the next release
  </para>

  <para>
   No functionality has been removed in this release.
  </para>
 </section>
</chapter>
