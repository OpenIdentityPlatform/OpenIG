<?xml version="1.0" encoding="UTF-8"?>
<!--
  ! CCPL HEADER START
  !
  ! This work is licensed under the Creative Commons
  ! Attribution-NonCommercial-NoDerivs 3.0 Unported License.
  ! To view a copy of this license, visit
  ! http://creativecommons.org/licenses/by-nc-nd/3.0/
  ! or send a letter to Creative Commons, 444 Castro Street,
  ! Suite 900, Mountain View, California, 94041, USA.
  !
  ! You can also obtain a copy of the license at
  ! trunk/legal/CC-BY-NC-ND.txt.
  ! See the License for the specific language governing permissions
  ! and limitations under the License.
  !
  ! If applicable, add the following below this CCPL HEADER, with the fields
  ! enclosed by brackets "[]" replaced with your own identifying information:
  !      Portions Copyright [yyyy] [name of copyright owner]
  !
  ! CCPL HEADER END
  !
  !      Copyright 2012-2014 ForgeRock AS
  !    
-->
<chapter xml:id='chap-whats-new'
         xmlns='http://docbook.org/ns/docbook' version='5.0' xml:lang='en'
         xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
         xsi:schemaLocation='http://docbook.org/ns/docbook
                             http://docbook.org/xml/5.0/xsd/docbook.xsd'
         xmlns:xlink='http://www.w3.org/1999/xlink'>
 <title>What's New in ${projectName}</title>

 <!-- Alternative for maintenance releases:
 <para>
  ${projectName} ${docTargetVersion} is a maintenance release.
  It does not introduce new features.
 </para>
 -->

 <itemizedlist>
  <para>
   ${projectName} ${docTargetVersion} fixes a number of issues,
   and provides the following additional features.
  </para>

  <listitem>
   <para>
    This release brings major improvements to the configuration model.
   </para>

   <para>
    ${projectName} now supports runtime configuration changes,
    with separate routes for separate applications (
    <link
     xlink:show="new"
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-73"
    >OPENIG-73</link>,
    <link
     xlink:show="new"
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-97"
    >OPENIG-97</link>,
    <link
     xlink:show="new"
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-204"
    >OPENIG-204</link>
    ).
    For a tutorial on how to use routes, see
    <link
     xlink:show="new"
     xlink:href="gateway-guide#chap-routing"
     xlink:role="http://docbook.org/xlink/role/olink"
    >Routing Tutorial</link>.
   </para>

   <para>
    ${projectName} now removes the Java EE Servlet and Servlet Filter objects
    to simplify configurations.
    The top-level configuration object now references a handler
    rather than a Servlet (
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-95"
     xlink:show="new">OPENIG-95</link>
    ).
   </para>

   <para>
    ${projectName} now supports the ability to change the location
    where configuration files are stored (
    <link
     xlink:show="new"
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-96"
    >OPENIG-96</link>,
    <link
     xlink:show="new"
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-140"
    >OPENIG-140</link>
    ).
   </para>
  </listitem>

  <listitem>
   <para>
    ${projectName} now supports OAuth 2.0 and OpenID Connect 1.0 (
    <link
     xlink:show="new"
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-176"
    >OPENIG-176</link>,
    <link
     xlink:show="new"
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-195"
    >OPENIG-195</link>
    ).
   </para>

   <para>
    ${projectName} can act as an OAuth 2.0 resource server
    on behalf of a server housing protected resources.
    For details and a tutorial demonstrating this capability see the chapter,
    <link
     xlink:show="new"
     xlink:href="gateway-guide#chap-oauth-rs"
     xlink:role="http://docbook.org/xlink/role/olink"
    ><citetitle>Configuring ${projectName} as an OAuth 2.0 Resource Server</citetitle></link>.
   </para>

   <para>
    ${projectName} can act as an OAuth 2.0 client application,
    and as an OpenID Connect 1.0 relying party.
    For details and a tutorial demonstrating these capabilities see the chapter,
    <link
     xlink:show="new"
     xlink:href="gateway-guide#chap-oauth2-client"
     xlink:role="http://docbook.org/xlink/role/olink"
    ><citetitle>Configuring ${projectName} as an OAuth 2.0 Client</citetitle></link>.
   </para>
  </listitem>

  <listitem>
   <para>
    ${projectName} now supports use of scripts to process and to handle
    the HTTP exchange (
    <link
     xlink:show="new"
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-66"
    >OPENIG-66</link>,
    <link
     xlink:show="new"
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-72"
    >OPENIG-72</link>,
    <link
     xlink:show="new"
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-80"
    >OPENIG-80</link>,
    <link
     xlink:show="new"
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-90"
    >OPENIG-90</link>,
    <link
     xlink:show="new"
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-92"
    >OPENIG-92</link>,
    <link
     xlink:show="new"
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-235"
    >OPENIG-235</link>
    ).
    Use the <literal>ScriptableFilter</literal>
    and <literal>ScriptableHandler</literal> objects
    to the configuration in order to hook scripts into exchange processing.
    At present Groovy is supported, but JavaScript is not.
    For examples using Groovy scripts for Filters and Handlers see the chapter,
    <link
     xlink:show="new"
     xlink:href="gateway-guide#chap-scripting"
     xlink:role="http://docbook.org/xlink/role/olink"
    ><citetitle>Scripting Filters &amp; Handlers</citetitle></link>.
   </para>

   <para>
    Scripting also adds support for working with LDAP servers (
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-81"
     xlink:show="new">OPENIG-81</link>
    ).
   </para>
  </listitem>

  <listitem>
   <para>
    ${projectName} now includes a default welcome page
    if no configuration is found (
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-202"
     xlink:show="new">OPENIG-202</link>
    ).
   </para>
  </listitem>

  <listitem>
   <para>
    SAML 2.0 federation support is now integrated into the
    main ${projectName} .war file (
    <link
     xlink:show="new"
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-94"
    >OPENIG-94</link>
    ).
   </para>

   <para>
    ${projectName} SAML 2.0 federation now supports SP-initiated single logout
    and also supports single logout using the SOAP binding (
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-10"
     xlink:show="new">OPENIG-10</link>,
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-237"
     xlink:show="new">OPENIG-237</link>
    ).
   </para>

   <para>
    ${projectName} SAML 2.0 federation now supports
    an option to set AuthnContext in the ${projectName} session (
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-9"
     xlink:show="new">OPENIG-9</link>
    ).
    You can also obtain OpenAM authentication level
    by including the <literal>AuthLevel</literal> attribute
    in the IDP or SP attribute mapping.
   </para>
  </listitem>

  <listitem>
   <para>
    ${projectName} Expressions now support additional built-in functions,
    and use of system properties and environment variables.
   </para>

   <para>
    Built-in functions to call within expressions now include
    <literal>base64Encode(string)</literal>,
    <literal>base64Decode(string)</literal>,
    <literal>matchingGroups(string, pattern)</literal>,
    <literal>read(filename)</literal>,
    <literal>readProperties(filename)</literal>,
    <literal>urlEncode(string)</literal>,
    and <literal>urlDecode(string)</literal>
    as described in the reference section,
    <link
     xlink:show="new"
     xlink:href="reference#Functions"
     xlink:role="http://docbook.org/xlink/role/olink"
    >Functions</link>
    (
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-54"
     xlink:show="new">OPENIG-54</link>,
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-213"
     xlink:show="new">OPENIG-213</link>
    ).
   </para>

   <para>
    Expressions access system properties and environment variables
    as described in the reference section,
    <link
     xlink:show="new"
     xlink:href="reference#Expressions"
     xlink:role="http://docbook.org/xlink/role/olink"
    >Expressions</link>.
   </para>

   <para>
    Expressions now also support Java Beans (
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-54"
     xlink:show="new">OPENIG-200</link>
    ).
   </para>
  </listitem>

  <listitem>
   <para>
    ${projectName} Expressions are now usable in more configuration fields (
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-37"
     xlink:show="new">OPENIG-12</link>,
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-211"
     xlink:show="new">OPENIG-211</link>,
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-232"
     xlink:show="new">OPENIG-232</link>
    ).
   </para>
  </listitem>

  <listitem>
   <para>
    ${projectName} now provides an HttpClient configuration object
    that lets you disable connection reuse when server does not support it,
    set socket and connection timeouts,
    choose how you verify host names in server certificates, and so forth (
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-12"
     xlink:show="new">OPENIG-12</link>,
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-38"
     xlink:show="new">OPENIG-38</link>,
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-203"
     xlink:show="new">OPENIG-203</link>
    ).
   </para>
  </listitem>

  <listitem>
   <para>
    ${projectName} now allows you to change URI components,
    rather than rewrite entire URIs (
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-70"
     xlink:show="new">OPENIG-70</link>,
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-243"
     xlink:show="new">OPENIG-243</link>
    ).
   </para>
  </listitem>

  <listitem>
   <para>
    ${projectName} now provides a RedirectFilter
    to rewrite Location headers returned as a result of a HTTP redirect (
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-35"
     xlink:show="new">OPENIG-35</link>
    ).
   </para>
  </listitem>

  <listitem>
   <para>
    ${projectName} StaticRequestFilter now lets you restore
    the original state of the request (
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-245"
     xlink:show="new">OPENIG-245</link>
    ).
   </para>
  </listitem>

  <listitem>
   <para>
    ${projectName} HttpBasicAuthFilter now lets users change their passwords
    during a session (
    <link
     xlink:href="https://bugster.forgerock.org/jira/browse/OPENIG-32"
     xlink:show="new">OPENIG-32</link>
    ).
   </para>
  </listitem>
 </itemizedlist>
 </chapter>
