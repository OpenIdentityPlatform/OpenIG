{
    "heap": {
        "objects": [
            {
                "name": "HandlerServlet",
                "type": "HandlerServlet",
                "config": {
                    "handler": "DispatchHandler",
                    "baseURI": "http://www.example.com:8081"
                }
            },
            {
                "name": "DispatchHandler",
                "type": "DispatchHandler",
                "config": {
                    "bindings": [
                        {
                            "handler": "OutgoingChain"
                        }
                    ]
                }
            },
            {
                "name": "OutgoingChain",
                "type": "Chain",
                "config": {
                    "filters": [
                        "CredentialsFromFile",
                        "LoginRequest",
                        "CaptureFilter"
                    ],
                    "handler": "DefaultHandler"
                }
            },
            {
                "name": "CredentialsFromFile",
                "type": "FileAttributesFilter",
                "config": {
                    "target": "${exchange.credentials}",
                    "file": "/tmp/userfile",
                    "key": "email",
                    "value": "george@example.com",
                    "fields": [
                        "username",
                        "password",
                        "fullname",
                        "email"
                    ]
                }
            },
            {
                "name": "LoginRequest",
                "type": "StaticRequestFilter",
                "config": {
                    "method": "POST",
                    "uri": "http://www.example.com:8081",
                    "form": {
                        "username": [
                            "${exchange.credentials.username}"
                        ],
                        "password": [
                            "${exchange.credentials.password}"
                        ]
                    }
                }
            },
            {
                "name": "CaptureFilter",
                "type": "CaptureFilter",
                "config": {
                    "captureEntity": false,
                    "file": "/tmp/gateway.log"
                }
            },
            {
                "name": "DefaultHandler",
                "type": "ClientHandler",
                "config": {}
            }
        ]
    },
    "servletObject": "HandlerServlet"
}
