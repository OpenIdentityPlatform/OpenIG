{
    "handler": {
        "type": "DispatchHandler",
        "config": {
            "bindings": [
                {
                    "condition": "${exchange.request.uri.path == '/login'}",
                    "handler": "ClientHandler",
                    "comment": "Must be able to trust the server cert for HTTPS",
                    "baseURI": "https://www.example.com:8444"
                },
                {
                    "condition": "${exchange.request.uri.scheme == 'http'}",
                    "handler": "ClientHandler",
                    "baseURI": "http://www.example.com:8081"
                },
                {
                    "handler": "ClientHandler",
                    "baseURI": "https://www.example.com:8444"
                }
            ]
        }
    },
    "capture": "all",
    "condition": "${matches(exchange.request.uri.query, 'demo=capture')}"
}
